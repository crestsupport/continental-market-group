<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Estate Stress Test</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f7f9;
            color: #333;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }
        nav {
            background-color: #2c3e50;
            padding: 1rem;
            width: 100%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            position: fixed;
            top: 0;
            z-index: 1000;
        }
        nav a {
            color: #ecf0f1;
            margin: 0 1.5rem;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        nav a:hover {
            color: #3498db;
        }
        .content {
            max-width: 600px;
            margin: 6rem auto 2rem;
            padding: 2rem;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .form-group {
            margin: 1.5rem 0;
        }
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #2c3e50;
        }
        input, select, button {
            width: 100%;
            padding: 0.75rem;
            margin: 0.25rem 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 1rem;
        }
        button {
            background-color: #3498db;
            color: #fff;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #2980b9;
        }
        #postalCodeError, #appraisalPriceError, #emailError {
            color: #e74c3c;
            margin-top: 0.5rem;
        }
        .section {
            display: none;
        }
        .active {
            display: block;
        }
        .results {
            margin-top: 1.5rem;
            padding: 1rem;
            background-color: #dff0d8;
            border-radius: 4px;
            display: none;
        }
        .loading {
            text-align: center;
            color: #7f8c8d;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <nav>
        <a href="#" onclick="event.preventDefault(); showSection('stress-test');">Stress Test</a>
        <a href="#" onclick="event.preventDefault(); showSection('about-us');">About Us</a>
        <a href="#" onclick="event.preventDefault(); showSection('privacy-terms');">Privacy & Terms</a>
    </nav>
    <div class="content">
        <div id="stress-test" class="section active">
            <h2>Real Estate Stress Test</h2>
            <form id="stressTestForm">
                <div class="form-group">
                    <label for="email">Email <span style="color: #e74c3c;">*</span></label>
                    <input type="email" id="email" name="email" placeholder="Enter your email" required>
                    <label for="postalCode">Postal Code</label>
                    <input type="text" id="postalCode" name="postalCode" placeholder="e.g., M5V 2T6" required>
                    <label for="appraisalPrice">Appraisal Price ($)</label>
                    <input type="number" id="appraisalPrice" name="appraisalPrice" placeholder="e.g., 500000" required>
                    <label for="propertyCategory">Property Type</label>
                    <select id="propertyCategory" name="propertyCategory" required>
                        <option value="">Select Property Type</option>
                        <option value="Condo">Condo</option>
                        <option value="House">House</option>
                        <option value="Townhouse">Townhouse</option>
                        <option value="Apartment">Apartment</option>
                        <option value="Duplex">Duplex</option>
                    </select>
                    <label for="province">Province</label>
                    <select id="province" name="province" required>
                        <option value="">Select Province</option>
                        <option value="Ontario">Ontario</option>
                        <option value="British Columbia">British Columbia</option>
                        <option value="Alberta">Alberta</option>
                        <option value="Quebec">Quebec</option>
                        <option value="Manitoba">Manitoba</option>
                        <option value="Saskatchewan">Saskatchewan</option>
                        <option value="Nova Scotia">Nova Scotia</option>
                        <option value="New Brunswick">New Brunswick</option>
                        <option value="Newfoundland and Labrador">Newfoundland and Labrador</option>
                        <option value="Prince Edward Island">Prince Edward Island</option>
                        <option value="Northwest Territories">Northwest Territories</option>
                        <option value="Yukon">Yukon</option>
                        <option value="Nunavut">Nunavut</option>
                    </select>
                    <label for="bedrooms">Bedrooms</label>
                    <input type="number" id="bedrooms" name="bedrooms" placeholder="e.g., 2" required>
                    <label for="bathrooms">Bathrooms</label>
                    <input type="number" id="bathrooms" name="bathrooms" placeholder="e.g., 1.5" required>
                    <label for="squareFootage">Square Footage</label>
                    <input type="number" id="squareFootage" name="squareFootage" placeholder="e.g., 1200" required>
                    <label for="location">Location</label>
                    <input type="text" id="location" name="location" placeholder="e.g., Downtown Toronto" required>
                    <button type="submit">Proceed to Payment</button>
                </div>
                <div id="postalCodeError"></div>
                <div id="appraisalPriceError"></div>
                <div id="emailError"></div>
            </form>
            <div id="results" class="results">
                <h3>Your Stress Test Results</h3>
                <p id="resultText"></p>
            </div>
            <div id="loading" class="loading" style="display: none;">Loading your results...</div>
        </div>
        <div id="about-us" class="section">
            <h2>About Us</h2>
            <p>We are a dedicated team of big data enthusiasts who make data make sense for the real world, committed to revolutionizing property value assessment. Unlike traditional property appraisals, which provide a static snapshot, our Real Estate Stress Test delivers a dynamic 24-month outlook, incorporating current market trends, economic indicators, and regional data. With over a decade of experience in the Canadian real estate market, we empower property owners and investors with actionable insights to navigate future uncertainties. Our mission is to simplify complex market dynamics through a user-friendly platform, supporting your financial planning with forward-looking analysis.</p>
        </div>
        <div id="privacy-terms" class="section">
            <h2>Privacy Policy & Terms of Use</h2>
            <h3>Privacy Policy</h3>
            <p>At Catalyst Consulting Group, we prioritize the privacy and security of our users. When you utilize our Real Estate Stress Test, we collect your email address and property-related data (e.g., postal code, appraisal price, property type) solely to generate and deliver your personalized 24-month property value outlook. This information is processed using state-of-the-art encryption and stored on secure servers compliant with industry standards. We do not sell, rent, or share your personal data with third parties for marketing purposes unless you provide explicit consent. Your data is retained only for the duration necessary to fulfill our service obligations—typically 30 days post-delivery—after which it is permanently deleted unless required by law (e.g., under Canada’s tax or financial regulations). By submitting your information, you consent to these data handling practices. You may request access, correction, or deletion of your data by contacting us at privacy@catalystcg.com. We are fully committed to complying with the Personal Information Protection and Electronic Documents Act (PIPEDA) and other applicable Canadian privacy laws, and we regularly audit our practices to ensure adherence.</p>

            <h3>Terms of Use</h3>
            <p>Welcome to the Real Estate Stress Test service provided by Catalyst Consulting Group ("we," "us," or "our"). These Terms of Use govern your access to and use of our online platform and services, including the Real Estate Stress Test, available at [your website URL]. By accessing or using our services, you agree to be bound by these terms. If you do not agree, please refrain from using our services.</p>

            <h4>1. Service Description</h4>
            <p>The Real Estate Stress Test is a predictive tool designed to provide a 24-month outlook on property value trends based on user-submitted data, market conditions, and stress testing methodologies. It is intended for informational purposes only and does not constitute financial, legal, investment, or professional advice. Users are encouraged to consult qualified professionals before making investment decisions.</p>

            <h4>2. Eligibility and Account</h4>
            <p>You must be at least 19 years of age and reside in Canada to use our services. No account creation is required; however, you must provide accurate and complete information during the stress test process. We reserve the right to suspend or terminate access if fraudulent or inaccurate data is detected.</p>

            <h4>3. Payment Terms</h4>
            <p>Access to the detailed 24-month outlook requires a one-time payment of $19.99 CAD, reflecting our current limited-time offer (regular price: $39.99 CAD), processed via our secure Stripe payment gateway. Payments are non-refundable except as required by law or at our sole discretion. We reserve the right to adjust pricing with reasonable notice. All transactions are in Canadian dollars and subject to applicable taxes.</p>

            <h4>4. Intellectual Property</h4>
            <p>All content, including the Real Estate Stress Test tool, reports, algorithms, and website design, is the intellectual property of Catalyst Consulting Group and protected by Canadian and international copyright laws. You may use the results for personal, non-commercial purposes only. Reproduction, distribution, or modification of our content without prior written consent is prohibited.</p>

            <h4>5. Use of Service</h4>
            <p>You agree to use the service responsibly and not to:
            - Submit false or misleading information.
            - Attempt to reverse-engineer or exploit the tool’s underlying technology.
            - Use the service for illegal or unauthorized purposes.
            We may monitor usage to ensure compliance and may suspend access if violations are detected.</p>

            <h4>6. Limitations of Liability</h4>
            <p>The Real Estate Stress Test provides estimates based on historical data, current market trends, and predictive models. We make no warranties, express or implied, regarding the accuracy, reliability, or suitability of the results. Catalyst Consulting Group, its affiliates, officers, and employees shall not be liable for any direct, indirect, incidental, consequential, or punitive damages, including but not limited to financial losses, arising from your use of the service or reliance on its outputs. Our total liability, if any, shall not exceed the amount you paid for the service.</p>

            <h4>7. Disclaimer of Warranties</h4>
            <p>The service is provided "as is" and "as available" without guarantees of uninterrupted or error-free operation. We do not warrant that the service will meet your specific needs or that any errors will be corrected. Your use of the service is at your own risk.</p>

            <h4>8. Indemnification</h4>
            <p>You agree to indemnify and hold harmless Catalyst Consulting Group from any claims, damages, or losses arising from your use of the service, violation of these terms, or infringement of third-party rights.</p>

            <h4>9. Termination</h4>
            <p>We reserve the right to terminate or suspend your access to the service at our discretion, with or without notice, if you breach these terms or if operational needs require it. Upon termination, your right to use the service ceases, but prior results remain your property for personal use.</p>

            <h4>10. Changes to Terms</h4>
            <p>We may update these Terms of Use from time to time to reflect changes in our services, legal requirements, or business practices. Notifications will be posted on this page or via email (if provided). Continued use of the service after changes constitutes acceptance of the new terms.</p>

            <h4>11. Governing Law and Dispute Resolution</h4>
            <p>These terms are governed by the laws of the Province of Ontario and the federal laws of Canada. Any disputes arising from or related to the service shall be resolved through binding arbitration in Toronto, Ontario, under the rules of the Canadian Arbitration Association, unless prohibited by law. You agree to waive your right to a jury trial or class action lawsuit. If arbitration is unavailable, exclusive jurisdiction lies with the courts of Ontario.</p>

            <h4>12. Force Majeure</h4>
            <p>We are not liable for delays or failures in service delivery due to circumstances beyond our control, including natural disasters, government actions, internet outages, or third-party service disruptions.</p>

            <h4>13. Contact Information</h4>
            <p>For questions, support, or to exercise your privacy rights, contact us at support@catalystcg.com or write to Catalyst Consulting Group, 123 Maple Street, Toronto, ON M5V 2T6, Canada. Our team is available Monday to Friday, 9 AM to 5 PM EDT.</p>

            <h4>14. Severability</h4>
            <p>If any provision of these terms is found to be unenforceable or invalid, the remaining provisions shall remain in full effect and be interpreted to fulfill the intent of these terms.</p>

            <h4>15. Entire Agreement</h4>
            <p>These Terms of Use, together with our Privacy Policy, constitute the entire agreement between you and Catalyst Consulting Group regarding the use of the Real Estate Stress Test service, superseding any prior agreements or understandings.</p>
        </div>
    </div>
    <script src="https://js.stripe.com/v3/"></script>
    <script>
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => section.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
        }

        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('stressTestForm');
            const resultsDiv = document.getElementById('results');
            const resultText = document.getElementById('resultText');
            const loadingDiv = document.getElementById('loading');

            if (form) {
                form.style.display = 'block';

                form.onsubmit = function(event) {
                    event.preventDefault();
                    const formData = {
                        email: document.getElementById('email').value,
                        postalCode: document.getElementById('postalCode').value,
                        appraisalPrice: document.getElementById('appraisalPrice').value,
                        propertyCategory: document.getElementById('propertyCategory').value,
                        province: document.getElementById('province').value,
                        bedrooms: document.getElementById('bedrooms').value,
                        bathrooms: document.getElementById('bathrooms').value,
                        squareFootage: document.getElementById('squareFootage').value,
                        location: document.getElementById('location').value
                    };
                    if (!formData.email) {
                        document.getElementById('emailError').textContent = 'Email is required to receive results.';
                        return;
                    }
                    if (!formData.postalCode.match(/[A-Za-z]\d[A-Za-z]\s?\d[A-Za-z]\d/)) {
                        document.getElementById('postalCodeError').textContent = 'Please enter a valid Canadian postal code (e.g., M5V 2T6).';
                        return;
                    }
                    if (!formData.appraisalPrice || formData.appraisalPrice <= 0 || !formData.squareFootage || formData.squareFootage <= 0) {
                        document.getElementById('appraisalPriceError').textContent = 'Please enter positive numbers for appraisal price and square footage.';
                        return;
                    }

                    // Generate a unique ID for tracking
                    const uniqueId = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                        const r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
                        return v.toString(16);
                    });

                    // Store form data with unique ID
                    localStorage.setItem(uniqueId, JSON.stringify(formData));
                    localStorage.setItem('client_reference_id', uniqueId); // Store for matching

                    // Redirect to Stripe Checkout with success URL
                    const stripeUrl = `https://buy.stripe.com/test_3cI6op3Ga7U20OY4dNa7C00?prefilled_email=${encodeURIComponent(formData.email)}&client_reference_id=${uniqueId}&success_url=${encodeURIComponent(window.location.href + '?session_id={CHECKOUT_SESSION_ID}')}&cancel_url=${encodeURIComponent(window.location.href)}`;
                    window.location.href = stripeUrl;
                };
            }

            // Handle return after payment
            const urlParams = new URLSearchParams(window.location.search);
            const sessionId = urlParams.get('session_id');
            if (sessionId) {
                loadingDiv.style.display = 'block';
                setTimeout(() => {
                    const storedUniqueId = localStorage.getItem('client_reference_id');
                    const formData = JSON.parse(localStorage.getItem(storedUniqueId));
                    if (formData) {
                        // Simulate payment confirmation and calculate results
                        const marketData = {
                            nationalTrends: { priceChangeAnnual: -0.015, salesDrop: 0.03, unsoldInventory: 0.05, basePrice: 679 },
                            policyImpact: { interestRate: 0.0275, economicUncertainty: 0.02 },
                            weights: { priceChange: 0.4, salesDrop: 0.3, unsoldInventory: 0.2, policyImpact: 0.1 },
                            postalCodeFactors: { 'M5V': 0.995, 'V6B': 0.99, 'H3B': 1.00, 'T2P': 0.98, 'B3J': 0.97, 'L0A': 0.99 }
                        };
                        const postalCodePrefix = formData.postalCode.toUpperCase().replace(/\s/g, '').slice(0, 3);
                        const postalFactor = marketData.postalCodeFactors[postalCodePrefix] || 1.0;
                        const nationalData = marketData.nationalTrends;
                        const sentimentScore = (nationalData.priceChangeAnnual * marketData.weights.priceChange) +
                                              (nationalData.salesDrop * marketData.weights.salesDrop * -1) +
                                              (nationalData.unsoldInventory * marketData.weights.unsoldInventory * -1) +
                                              (marketData.policyImpact.economicUncertainty * marketData.weights.policyImpact * -1);
                        const adjustedGrowthRate = Math.max(Math.min(sentimentScore * 0.5, 0.02), -0.02);
                        const currentValue = parseFloat(formData.appraisalPrice);
                        const projectedValue = currentValue * (1 + adjustedGrowthRate);
                        const percentageChange = ((projectedValue - currentValue) / currentValue) * 100;

                        let increaseChance, declineChance, outlook;
                        let majorVulnerabilities = [];
                        let majorGrowthFactors = [];

                        if (percentageChange < -2) {
                            declineChance = 60; increaseChance = 40;
                            outlook = `Expected value decrease of ${(-percentageChange).toFixed(1)}% over 2 years due to market conditions.`;
                            majorVulnerabilities = [
                                `Rising interest rates (${(marketData.policyImpact.interestRate * 100).toFixed(2)}% current impact) could increase borrowing costs, pressuring property values.`,
                                `Increased economic uncertainty (${(marketData.policyImpact.economicUncertainty * 100).toFixed(2)}% effect) may reduce buyer confidence.`,
                                `A ${((nationalData.salesDrop * 100) + (nationalData.unsoldInventory * 100)).toFixed(1)}% combined impact from declining sales and rising unsold inventory could further depress prices.`
                            ];
                        } else if (percentageChange > 2) {
                            increaseChance = 60; declineChance = 40;
                            outlook = `Expected value increase of ${percentageChange.toFixed(1)}% over 2 years, though tempered by risks.`;
                            majorGrowthFactors = [
                                `Falling interest rates (potential decrease from ${marketData.policyImpact.interestRate * 100}% could stimulate demand.`,
                                `Favorable government housing policies (e.g., tax incentives) could boost market confidence.`,
                                `A recovery in sales activity (offsetting the current ${nationalData.salesDrop * 100}% drop) could drive price growth.`
                            ];
                        } else {
                            increaseChance = 50; declineChance = 50;
                            outlook = `Value expected to remain stable (±2%) over 2 years, reflecting current market trends.`;
                            majorVulnerabilities = [
                                `Rising interest rates (${(marketData.policyImpact.interestRate * 100).toFixed(2)}% current impact) could pose a moderate risk.`,
                                `Economic uncertainty (${(marketData.policyImpact.economicUncertainty * 100).toFixed(2)}% effect) might affect stability.`
                            ];
                            majorGrowthFactors = [
                                `Falling interest rates (potential decrease from ${marketData.policyImpact.interestRate * 100}%) could provide a slight uplift.`,
                                `Stable government policy could maintain current trends.`
                            ];
                        }

                        const result = `
                            Email: ${formData.email}
                            Current Value: $${currentValue.toLocaleString()}
                            Projected Value (2 Years): $${projectedValue.toLocaleString()}
                            2-Year Outlook: ${outlook}
                            Price Movement Probability: ${increaseChance}% chance of increase, ${declineChance}% chance of decline
                            Location: ${formData.location} (Postal Code: ${formData.postalCode})
                            Property Type: ${formData.propertyCategory}
                            Province: ${formData.province}
                            Major Vulnerabilities to Price Decline:
                            ${majorVulnerabilities.map(v => `- ${v}`).join('\n')}
                            Major Factors for Price Increase:
                            ${majorGrowthFactors.map(f => `- ${f}`).join('\n')}
                            Please save these results for your records. Unlike static appraisals, this stress test highlights dynamic risks and opportunities, empowering you with a proactive strategy.
                        `;
                        resultText.textContent = result;
                        resultsDiv.style.display = 'block';
                    } else {
                        resultText.textContent = 'Error: Could not retrieve your data. Please contact support.';
                        resultsDiv.style.display = 'block';
                    }
                    loadingDiv.style.display = 'none';
                    localStorage.removeItem(storedUniqueId); // Clean up
                    localStorage.removeItem('client_reference_id');
                }, 1000); // Simulate loading delay
            }
        });
    </script>
</body>
</html>
